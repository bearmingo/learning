# 解析

## XOR方法解析

异或特性:

1. 任何数和本身异或结果为0, $a\oplus b=0$
2. 任何数和0异或结果是数本身, $a \oplus 0 = a$
3. 异或满足交换律, $a \oplus b \oplus c = a \oplus c \oplus b$

$X = 1 \oplus 2 \oplus ...... \oplus n$

假设$x'$是$1$到$n$中的任意一个数字, $s$是$1$到$n$的中除了$i$的其他数字

$$
X'= 1 \oplus 2 \oplus ... x_i \oplus... n, \{x_i \ne x' \}
$$

根据异或的特性，有：
$$
x' = X \oplus X'
$$

在这个题目中, 重复的数字在数组中出现2次，丢失的数字在数组中出现0次，其余的每个一数字在数组中都出现了一次。由此可见，重复的数字和丢失的数字的出现次数的奇偶性相同，且和其余的每一数字的出现次数的奇偶性不同。如果在数组的n个数字后面在添加从1到n的每个数字，得到2n个数字，则在2n个数字中，重复的数字出现了3次，丢失的数字出现了1次，其余的每个数字都出现了2次。根据出现次数的奇偶性，可以使用异或运算求救。

用x和y分别表示重复的数字和丢失的数字。

考虑上述$2n$个数字的异或运算的结果为xor, 由于异或运算 $\oplus$ 满足交换了和结合绿，且对任何数字a都满足$a \oplus a = 0$和$a \oplus 0 = a$,因此$xor=x \oplus x \oplus \oplus y = x \oplus y$, 即x和y的异或运算的结果。

由于$x \ne y$，因此$xor \ne 0$，令$lowbit = xor \And (-xor)$, 则$lowbit$为x和y的二进制表示中的最低不同位，可以用$lowbit$区分x和y.

得到lowbit之后，可以将上述的2n个数字分成2组，第一组的每个数字都满足$a \And lowbit = 0$,则第二组的数字b都满足$b \And lowbit \ne 0$

创建两个变量num1和num2，初始值都为0，然后在次变量上述2n个数字，对于每个数字a, 如果$a \And lowbit = 0$, 则令$num1 = num2 \oplus a$, 否则令$num2 = num2 \oplus a$

遍历结束之后，num1为第一组的全部数字的异或结果，num2为第二组的全部数字的异或结果。由于第一个数字只能出现在其中的一组，且除了x和y之外，每个数字一定在其中一组出现了2次，因此num1和num2分别对应x和y的一个数字，但是具体对应哪个数还未知。

为了知道num1和num2分别对应x和y中的哪一个数字，值需要再次遍历数组nums即可。如果数组中存在元素等于num1,则有$x = num1$和$y = num2$,否则$x = num2$和$y = num1$


可以根据异或的特性，得知a和b的异或结果$a\oplus b$, 但不能确定a和b哪一个是从重复的，哪一个是缺失的。

