## 缓存
使用下面的语句查询
```sql
SHOW GLOBAL VARIABLES LIKE '%sort_buffer_size%'
```

可以使用缓存计算器(http://www.mysqlcalculator.com) ,计算总的内存大小。
其他缓存查询参考 [[MySQL配置参数]]

## 时区
```sql
SHOW VARIABLES LIKE '%time_zone%'
SET time_zone = '+8:00'
```
> 数据库查询时区有可能造成CPU过高。

## 慢查询
```sql
SHOW VARIABLES LIKE 'long_query_time';
SHOW VARIABLES LIKE '%slow';

-- 开启慢查询日志
SET slow_query_log=ON;
-- 设置慢查询的阀值
SET long_query_time=1;
-- 开启执行sql的日志
SET GLOBAL general_log=ON;
-- 查看慢查询日志存放路径
SHOW VARIABLES LIK 'slow_query_log_file'

--显示慢查询的次数
SHOW STATUS LIKE 'slow_queries';
```

## 客户端连接数
```sql
-- 查看当前连接数量
SHOW STATUS LIKE 'connections';

-- 查看最大的连接数量
SHOW GLOBAL STATUS LIKE 'Max_used_connections'
-- 查看最大的连接数量配置
SHOW VARIABLE LIKE '%max_connections%'
```

## 其他
### 2G内存，抗压型推荐配置
```txt
table_cache=1024 物理内存越大,设置就越大.默认为2402,调到512-1024最佳
innodb_additional_mem_pool_size=4M 默认为2M
innodb_flush_log_at_trx_commit=1
(设置为0就是等到innodb_log_buffer_size列队满后再统一储存,默认为1)
innodb_log_buffer_size=2M 默认为1M
innodb_thread_concurrency=8 你的服务器CPU有几个就设置为几,建议用默认一般为8
key_buffer_size=256M 默认为218 调到128最佳
tmp_table_size=64M 默认为16M 调到64-256最挂
read_buffer_size=4M 默认为64K
read_rnd_buffer_size=16M 默认为256K
sort_buffer_size=32M 默认为256K
max_connections=1024 默认为1210
thread_cache_size=120 默认为60
query_cache_size=64M
```